<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <title>Pico W test</title>
</head>
<body>

<h2>Pico W – test príjmu</h2>
<pre id="output">Čakám na dáta…</pre>

<script>
    async function loadData() {
        const res = await fetch("/api/test-pico");
        const data = await res.json();

        const out = document.getElementById("output");

        if (!data) {
            out.textContent = "Zatiaľ nič neprišlo";
            return;
        }

        out.textContent =
            "Sensor ID: " + data.sensor_id + "\n" +
            "Litrov: " + data.litres + "\n" +
            "Čas z Pico: " + new Date(data.timestamp * 1000) + "\n" +
            "Prijaté serverom: " + data.receivedAt;
    }

    setInterval(loadData, 1000);
</script>

</body>
</html>
